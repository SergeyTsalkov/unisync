
rsync --archive --delete --exclude='.git' --exclude='unisync' /Users/sergey/unisync/ sergey@51.79.19.179:unisync

{
  local: /path/to/stuff
  remote: /path/to/stuff
  username: (required for ssh, ignored for directtls)
  host: [ip]
  port: (defaults to 22 for ssh, required for directtls)
  method: ssh | nativessh | directtls
  prefer: local | remote | newer | older (default: newer)
  cache: filename (default: [name].cache)
}

example:
  unisync ~/localpath user@host:remotepath/
  unisync myhost.json

alternative config format: (must still be able to encode as json for sending to server and back)
  local = blah
  remote = asdf
  username = asdf
  host = myip
  ignore = 
  chmod_local_dir = 0755



TODO:
  - dump server connection on error, auto reconect and retry
  - ignore feature in config
  - handle fswatch events on both sides
  - work without config file, from command line; choose cache name intelligently

  - write to tmpfile in same dir, rename on finish, delete on error
    .unisync-tmp-[randomstring]
    (delete these files when syncing, just in case)

  - progress bar, nicer-looking console progress on sync
    maybe send PROGRESS {path: bigfile.txt, progress: 5} every second if receiving file takes more than 1 second
    will need to send size as part of PUSH so other side knows expected file size (even if it's not guaranteed)
    <- thisfile.txt
    -> somedir/thatfile.txt
    <- DEL otherfile.txt
    -> CHMOD asfasf.txt rw-r--r--
    <- [5%] bigfile.txt

    - 


       



